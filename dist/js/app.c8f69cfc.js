(function(t){function e(e){for(var s,o,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},r={app:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"2d52":function(t,e,a){"use strict";a("4f36")},"4f36":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app container--fluid main grid min-h-screen place-items-center"},[a("div",{staticClass:"navbar w-full min-h-navbar flex flex-col lg:flex-row pt-4 lg:px-32 items-center justify-between"},[a("div",{staticClass:"flex flex-row"},[a("h2",{staticClass:"font-bold text-white text-xl md:text-3xl xl:text-4xl pr-2 lg:p-0"},[a("router-link",{attrs:{tag:"a",to:{name:"Home"}}},[t._v(" С Л Е Д У Й З А М Н О Й ")])],1),a("div",{staticClass:"button lg:hidden",on:{click:function(e){t.buttonsHidden=!t.buttonsHidden}}},[a("v-icon",{staticClass:"text-green-600 w-full h-full",staticStyle:{color:"mediumseagreen"},attrs:{size:"24"}},[t._v(" "+t._s(t.getArrowDirection)+" ")])],1)]),a("div",{staticClass:"buttons flex-col items-center w-4/5 md:w-86 lg:w-auto md:py-2\n                lg:p-0 md:justify-around lg:justify-start md:flex-row lg:flex",class:{hidden:t.buttonsHidden,flex:!t.buttonsHidden}},[a("div",{staticClass:"border-2 rounded-lg\n                 px-3 py-2 mt-4 md:my-0 md:mr-3\n                 hover:text-white font-bold text-center\n                 cursor-pointer\n                 border-green-600 hover:bg-green-600 text-green-200\n                 w-full md:w-2/5 lg:w-auto\n                ",on:{click:t.button1Action}},[t.isAuth?a("v-icon",{staticStyle:{color:"white"}},[t._v(" mdi-account ")]):t._e(),t._v(" "+t._s(t.getButton1Text)+" ")],1),a("div",{staticClass:"border-2  rounded-lg\n               px-3 py-2 mt-4 md:m-0\n               hover:text-white font-bold text-center\n               cursor-pointer\n               w-full md:w-2/5 lg:w-auto\n              ",class:{"border-red-600 text-red-200 hover:bg-red-600":t.isAuth,"border-blue-600 text-blue-200 hover:bg-blue-600":!t.isAuth},on:{click:t.button2Action}},[t._v(" "+t._s(t.getButton2Text)+" ")])])]),a("div",{staticClass:"grid place-items-center w-screen min-h-main lg:min-h-screen"},[a("router-view")],1)])},n=[],o=(a("d3b7"),{name:"App",data:function(){return{buttonsHidden:!0}},computed:{isAuth:function(){return this.$store.getters.isAuth},getButton1Text:function(){return this.isAuth?"Профиль":"Авторизация"},getButton2Text:function(){return this.isAuth?"Выйти":"Регистрация"},button1Action:function(){return this.isAuth?this.profileTransitionAction:this.loginAction},button2Action:function(){return this.isAuth?this.logoutAction:this.signupAction},getArrowDirection:function(){return this.buttonsHidden?"mdi-arrow-down-drop-circle-outline":"mdi-arrow-up-drop-circle-outline"}},methods:{logoutAction:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.go(-1)}))},profileTransitionAction:function(){this.$router.push("/userboard")},loginAction:function(){this.$router.push("/login")},signupAction:function(){this.$router.push("/signup")}},created:function(){var t=this;this.$http.interceptors.response.use(void 0,(function(e){return new Promise((function(a,s){throw 401===e.status&&e.config&&t.$store.dispatch("logout"),e}))}))}}),i=o,l=(a("ba77"),a("2877")),c=a("6544"),u=a.n(c),d=a("132d"),p=Object(l["a"])(i,r,n,!1,null,"6c8c686c",null),m=p.exports;u()(p,{VIcon:d["a"]});var f=a("bc3a"),g=a.n(f),h=a("8c4f"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ChoiceComponent")},b=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("PlaceCardSkeletonLoader"):a("div",{staticClass:"card w-64 md:w-96 xl:w-128 bg-green-400 py-4 xl:py-6 rounded-2xl flex flex-col items-center"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"w-11/12 bg-white bg-opacity-30",attrs:{name:"placepicker",id:"place"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selected=e.target.multiple?a:a[0]}}},t._l(t.options,(function(e){return a("option",{key:e.id,domProps:{value:e.value}},[t._v(" "+t._s(e.text)+" ")])})),0),a("button",{staticClass:"button w-2/3 mt-4 xl:mt-6 py-2 px-3 font-bold text-white rounded-lg",staticStyle:{background:"#5381b8"},on:{click:t.handleSearch}},[t._v(" Начать поиск ")]),a("v-snackbar",{attrs:{"multi-line":t.multiLine,"min-width":"260"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.notSelectedExceptionMessage)+" "),[a("v-btn",{staticStyle:{color:"#60c5fc"},attrs:{plain:"",text:"",disabled:t.button_disabled},on:{click:function(e){t.snackbar=!1}}},[t._v(" Закрыть ")])]],2)],1)},w=[],_=a("1da1"),y=(a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-2/3 shadow-md\n            flex flex-col lg:flex-row justify-between\n            bg-white rounded-2xl my-12 "},[a("div",{staticClass:"lg:w-1/2 pt-4 lg:p-8 flex flex-col text-center justify-around"},[a("v-skeleton-loader",{staticClass:"rounded-2xl w-11/12 self-center",attrs:{type:"image"}}),a("v-skeleton-loader",{staticClass:"py-4",attrs:{type:"list-item"}}),a("hr"),a("v-skeleton-loader",{staticClass:"py-4",attrs:{type:"list-item"}}),a("hr")],1),a("div",{staticClass:"lg:w-1/2 flex flex-col justify-around lg:p-8 text-center lg:text-left"},[a("v-skeleton-loader",{staticClass:"text-2xl",attrs:{type:"list-item"}}),a("hr"),a("v-skeleton-loader",{staticClass:"py-2 px-4",attrs:{type:"paragraph"}}),a("hr"),a("v-skeleton-loader",{attrs:{type:"list-item"}})],1)])}),k=[],C={name:"PlaceCardSkeletonLoader"},$=C,j=a("3129"),A=Object(l["a"])($,y,k,!1,null,"3a1f7062",null),O=A.exports;u()(A,{VSkeletonLoader:j["a"]});var S={components:{PlaceCardSkeletonLoader:O},name:"ChoiceComponent",data:function(){return{loading:!1,selected:null,options:[],notSelectedExceptionMessage:"Чтобы осуществить поиск, выберите категорию.",multiLine:!0,snackbar:!1,button_disabled:!1}},methods:{handleSearch:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.selected){e.next=3;break}return t.snackbar=!0,e.abrupt("return");case 3:return t.loading=!0,e.next=6,t.$store.dispatch("getPlace",t.selected).then((function(){return t.$router.push("/place")})).catch((function(t){return console.log(t)}));case 6:t.loading=!1,t.selected=null,t.snackbar=!1;case 9:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/generator/categories").then((function(e){t.options=e.data})).catch((function(t){return console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}},P=S,N=a("8336"),L=a("2db4"),R=Object(l["a"])(P,v,w,!1,null,"53cf80f0",null),q=R.exports;u()(R,{VBtn:N["a"],VSnackbar:L["a"]});var U={name:"Home",components:{ChoiceComponent:q}},E=U,D=Object(l["a"])(E,x,b,!1,null,null,null),T=D.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-5/6 lg:w-2/3 place flex justify-center py-12 mb-12"},[a("PlaceCard",{attrs:{title:t.placeOptions.title,address:t.placeOptions.address,description:t.placeOptions.description,tags:t.placeOptions.tags,bus_station:t.placeOptions.bus_station,photo:t.placeOptions.photo[0],rating:t.placeOptions.rating}})],1)},I=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container\n            shadow-md\n            flex flex-col lg:flex-row justify-between\n            bg-white\n            rounded-2xl sm:text-center\n            sm:text-xl md:text-2xl lg:text-xl xl:text-xl 2xl:text-2xl"},[a("div",{staticClass:"lg:w-1/2 px-4 pt-4 lg:p-8 flex flex-col justify-between text-center"},[a("img",{staticClass:"rounded-2xl object-cover self-center",attrs:{src:t.photo,alt:""}}),a("div",{staticClass:"container flex justify-center items-end py-4 lg:hidden"},[a("h3",{staticClass:"text-3xl md:text-4xl px-4 font-bold"},[t._v(t._s(t.title))]),a("h3",{staticClass:"text-xl"},[t._v(" "+t._s(t.rating.toFixed(2))+" ")]),a("v-icon",{attrs:{color:"#ffd061","background-color":"#ffdc8a",size:t.star_size}},[t._v(" mdi-star ")])],1),a("hr",{staticClass:"lg:hidden"}),a("span",{staticClass:"py-2 mt-2 text-base"},[a("i",{staticClass:"fas fa-map-marked-alt"}),t._v(" "+t._s(t.address))]),a("span",{staticClass:"py-2 text-base"},[a("i",{staticClass:"fas fa-bus"}),t._v(" "+t._s(t.bus_station))]),a("rating",{staticClass:"py-2"})],1),a("div",{staticClass:"lg:w-1/2 flex flex-col justify-around lg:p-8 text-center items-center"},[a("div",{staticClass:"container flex justify-center items-end hidden lg:flex"},[a("h3",{staticClass:"lg:text-4xl xl:text-4xl 2xl:text-5xl px-6 font-bold"},[t._v(t._s(t.title))]),a("h3",{staticClass:"lg:text-2xl 2xl:text-3xl"},[t._v(" "+t._s(t.rating)+" ")]),a("v-icon",{attrs:{color:"#ffd061","background-color":"#ffdc8a",size:t.star_size}},[t._v(" mdi-star ")])],1),a("hr"),a("p",{staticClass:"py-4 lg:p-0 w-2/3 lg:w-full self-center text-justify"},[t._v(t._s(t.description))]),a("hr"),a("div",{staticClass:"container flex py-4 lg:p-0 justify-center"},t._l(t.tags,(function(e){return a("span",{key:e,staticClass:"m-2 py-2 px-3 text-center rounded-md capitalize\n               text-base",staticStyle:{"background-color":"#FFD9CC"}},[t._v(" "+t._s(e)+" ")])})),0)]),a("v-snackbar",{attrs:{timeout:t.timeout,"min-width":"250"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[a("span",{staticClass:"font-bold text-base"},[t._v(t._s(t.message))])])],1)},z=[],B=(a("a9e3"),a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-rating",{attrs:{"half-increments":"",hover:"",length:"5",size:t.starSize,color:"#ffd061","background-color":"#ffdc8a",readonly:null!=t.userRating&&t.alreadyRates},on:{input:t.sendRating},model:{value:t.userRating,callback:function(e){t.userRating=e},expression:"userRating"}})}),F=[],H=(a("7db0"),{name:"rating",data:function(){return{userRating:null,alreadyRates:!1}},computed:{starSize:function(){switch(this.$vuetify.breakpoint.name){case"xs":return 24;case"sm":return 24;case"md":return 32;case"lg":return 32;case"xl":return 32;default:return 48}}},methods:{sendRating:function(){var t=this.$store.getters.getPlaceID,e=this.userRating,a=this.$store.getters.getToken;this.$store.dispatch("sendRate",{userToken:a,placeId:t,rate:e}),this.alreadyRates=!0}},created:function(){if(this.$store.getters.authedUser){var t=this.$store.getters.getPlaceID,e=this.$store.getters.authedUser.places,a=e.find((function(e){return e._id===t}));void 0!==a?(this.userRating=a.rating,this.alreadyRates=!0):this.alreadyRates=!1}}}),J=H,G=a("1d4d"),K=Object(l["a"])(J,B,F,!1,null,"9ba67468",null),Q=K.exports;u()(K,{VRating:G["a"]});var W={name:"PlaceCard",components:{Rating:Q},props:{title:{type:String,default:"ДВФУ"},photo:{type:String,default:"unsplash.com"},address:{type:String,default:"Адрес"},description:{type:String,default:"Описание"},bus_station:{type:String,default:"Некрасовская, 50"},rating:{type:Number,default:5},tags:{type:Array,default:null}},data:function(){return{snackbar:!1,timeout:3e3,message:"Возможность оценки мест доступна только авторизованным пользователям!"}},computed:{star_size:function(){switch(this.$vuetify.breakpoint.name){case"xs":return 24;case"sm":return 24;case"md":return 32;case"lg":return 32;case"xl":return 32;default:return 48}}},created:function(){this.$store.getters.isAuth||(this.snackbar=!0)}},X=W,Y=(a("5d89"),Object(l["a"])(X,M,z,!1,null,"4afc05e9",null)),Z=Y.exports;u()(Y,{VIcon:d["a"],VSnackbar:L["a"]});var tt={name:"CardView",components:{PlaceCard:Z},data:function(){return{loading:!0,placeOptions:{title:"bar",address:"bar",description:"bar",bus_station:"bar",rating:null,tags:[],photo:[]}}},created:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$store.getters.lastPlace;case 3:t.placeOptions=e.sent,t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()}},et=tt,at=Object(l["a"])(et,V,I,!1,null,"691d4074",null),st=at.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid min-h-screen place-items-center w-full"},[a("form",{staticClass:"w-11/12 p-12 bg-green-400 rounded-2xl sm:w-8/12 md:w-1/2 lg:w-5/12",attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.handleRegisterSubmit.apply(null,arguments)}}},[a("h1",{staticClass:"text-xl font-semibold"},[t._v(" Пожалуйста, заполните все поля: ")]),a("form",{staticClass:"mt-6"},[a("div",{staticClass:"flex justify-between gap-3"},[a("span",{staticClass:"w-1/2"},[a("label",{staticClass:"block text-xs font-semibold text-gray-600 uppercase",attrs:{for:"firstname"}},[t._v("Имя ")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.firstName,expression:"firstName",modifiers:{trim:!0}}],staticClass:"block w-full p-3 mt-2 text-gray-700 bg-gray-200 appearance-none focus:outline-none focus:bg-gray-300 focus:shadow-inner",attrs:{id:"firstname",type:"text",name:"firstname",placeholder:"Ivan",autocomplete:"given-name",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("span",{staticClass:"w-1/2"},[a("label",{staticClass:"block text-xs font-semibold text-gray-600 uppercase",attrs:{for:"lastname"}},[t._v("Фамилия ")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lastName,expression:"lastName",modifiers:{trim:!0}}],staticClass:"block w-full p-3 mt-2 text-gray-700 bg-gray-200 appearance-none focus:outline-none focus:bg-gray-300 focus:shadow-inner",attrs:{id:"lastname",type:"text",name:"lastname",placeholder:"Ivanov",autocomplete:"family-name",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),a("label",{staticClass:"block mt-2 text-xs font-semibold text-gray-600 uppercase",attrs:{for:"username"}},[t._v("Логин ")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username,expression:"username",modifiers:{trim:!0}}],staticClass:"block w-full p-3 mt-2 text-gray-700 bg-gray-200 appearance-none focus:outline-none focus:bg-gray-300 focus:shadow-inner",attrs:{id:"username",type:"text",name:"username",placeholder:"god_damn424",autocomplete:"username",required:""},domProps:{value:t.username},on:{keyup:t.usernameAvailable,input:function(e){e.target.composing||(t.username=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.username.required?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"username"}},[t._v("Обязательное поле")]),t.$v.username.alphaNum?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"username"}},[t._v("используйте латиницу и цифры")]),t.$v.username.minLength?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"username"}},[t._v("Длина должна быть больше 8 символов")]),t.$v.username.maxLength?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"username"}},[t._v("Длина должна быть меньше 16 символов")]),t.username_available||null==t.username_available?t.username?a("label",{staticClass:"block mt-2 text-xs font-semibold uppercase text-white",attrs:{for:"username"}},[t._v("Имя пользователя свободно")]):t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"username"}},[t._v("Имя пользователя занято")]),a("label",{staticClass:"block mt-2 text-xs font-semibold text-gray-600 uppercase",attrs:{for:"password"}},[t._v("Пароль ")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],staticClass:"block w-full p-3 mt-2 text-gray-700 bg-gray-200 appearance-none focus:outline-none focus:bg-gray-300 focus:shadow-inner",attrs:{id:"password",type:"password",name:"password",placeholder:"********",autocomplete:"new-password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.password.required?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"password"}},[t._v("Обязательное поле")]),t.$v.password.alphaNum?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"password"}},[t._v("используйте латиницу и цифры")]),t.$v.password.minLength?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"password"}},[t._v("Длина должна быть больше 8 символов")]),t.$v.password.maxLength?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"password"}},[t._v("Длина должна быть меньше 16 символов")]),a("label",{staticClass:"block mt-2 text-xs font-semibold text-gray-600 uppercase",attrs:{for:"password-confirm"}},[t._v("Подтверждение пароля ")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password_confirmation,expression:"password_confirmation",modifiers:{trim:!0}}],staticClass:"block w-full p-3 mt-2 text-gray-700 bg-gray-200 appearance-none focus:outline-none focus:bg-gray-300 focus:shadow-inner",attrs:{id:"password-confirm",type:"password",name:"password-confirm",placeholder:"********",autocomplete:"new-password",required:""},domProps:{value:t.password_confirmation},on:{input:function(e){e.target.composing||(t.password_confirmation=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.password_confirmation.sameAsPassword?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"password-confirm"}},[t._v("Пароли не совпадают")]),a("button",{staticClass:"w-full mt-5 py-2 tracking-widest uppercase font-medium bg-black rounded shadow-md focus:outline-none cursor-default",class:{active:t.isValid},attrs:{type:"submit",disabled:!t.isValid},on:{click:function(e){return e.preventDefault(),t.handleRegisterSubmit.apply(null,arguments)}}},[a("span",{staticClass:"text-white"},[t._v("Зарегистрироваться")])]),a("p",{staticClass:"flex justify-between inline-block mt-4 text-md italic text-gray-500 cursor-pointer uppercase hover:text-black",on:{click:t.alreadyRegister}},[t._v("Уже есть аккаунт? ")])])])])},nt=[],ot=a("1dce"),it=a("b5ae"),lt={name:"RegistrationForm",mixins:[ot["validationMixin"]],props:{nextUrl:{type:String,default:""}},validations:{username:{required:it["required"],minLength:Object(it["minLength"])(8),maxLength:Object(it["maxLength"])(16),alphaNum:it["alphaNum"]},password:{required:it["required"],minLength:Object(it["minLength"])(8),maxLength:Object(it["maxLength"])(16),alphaNum:it["alphaNum"]},password_confirmation:{sameAsPassword:Object(it["sameAs"])("password")}},data:function(){return{firstName:"",lastName:"",username:"",password:"",password_confirmation:"",username_available:null}},methods:{handleRegisterSubmit:function(){var t=this,e={firstname:this.firstName,lastname:this.lastName,username:this.username,password:this.password};this.$store.dispatch("register",e).then((function(){return t.$router.push("/")})).catch((function(t){return console.log(t)}))},alreadyRegister:function(){this.$router.push("/login")},usernameAvailable:function(){var t=this;this.username.length>=8&&this.$http.get("/auth/nameavailable",{params:{username:this.username}}).then((function(e){t.username_available=e.data.status}))}},computed:{isValid:function(){return this.$v.$touch(),!this.$v.$invalid}}},ct=lt,ut=(a("b643"),Object(l["a"])(ct,rt,nt,!1,null,"e3dd5d92",null)),dt=ut.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid min-h-screen place-items-center w-full"},[a("div",{staticClass:"w-11/12 p-12 bg-green-400 rounded-2xl sm:w-8/12 md:w-1/2 lg:w-5/12"},[a("h1",{staticClass:"text-xl font-semibold"},[t._v(" Введите данные для входа: ")]),a("form",{staticClass:"mt-6"},[a("label",{staticClass:"block mt-2 text-xs font-semibold text-gray-600 uppercase",attrs:{for:"username"}},[t._v("Логин ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"block w-full p-3 mt-2 text-gray-700 bg-gray-200 appearance-none focus:outline-none focus:bg-gray-300 focus:shadow-inner",attrs:{id:"username",type:"text",name:"username",placeholder:"god_damn424",autocomplete:"username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t.$v.username.required?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"username"}},[t._v("Обязательное поле")]),t.$v.username.alphaNum?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"username"}},[t._v("используйте латиницу и цифры")]),t.$v.username.minLength?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"username"}},[t._v("Длина должна быть больше 8 символов")]),t.$v.username.maxLength?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"username"}},[t._v("Длина должна быть меньше 16 символов")]),a("label",{staticClass:"block mt-2 text-xs font-semibold text-gray-600 uppercase",attrs:{for:"password"}},[t._v("Пароль ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"block w-full p-3 mt-2 text-gray-700 bg-gray-200 appearance-none focus:outline-none focus:bg-gray-300 focus:shadow-inner",attrs:{id:"password",type:"password",name:"password",placeholder:"********",autocomplete:"new-password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.$v.password.required?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"password"}},[t._v("Обязательное поле")]),t.$v.password.alphaNum?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"password"}},[t._v("используйте латиницу и цифры")]),t.$v.password.minLength?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"password"}},[t._v("Длина должна быть больше 8 символов")]),t.$v.password.maxLength?t._e():a("label",{staticClass:"block mt-2 text-xs font-semibold text-red-500 uppercase",attrs:{for:"password"}},[t._v("Длина должна быть меньше 16 символов")]),a("button",{staticClass:"w-full mt-5 py-2 tracking-widest uppercase font-medium bg-black rounded shadow-md hover:bg-blue-600 hover:shadow-none focus:outline-none",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.handleLoginSubmit.apply(null,arguments)}}},[a("span",{staticClass:"text-white"},[t._v("Войти")])])])]),a("v-snackbar",{attrs:{timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.loginErrorMessage)+" ")])],1)},mt=[],ft={name:"LoginForm",mixins:[ot["validationMixin"]],props:{nextUrl:{type:String,default:""}},validations:{username:{required:it["required"],minLength:Object(it["minLength"])(8),maxLength:Object(it["maxLength"])(16),alphaNum:it["alphaNum"]},password:{required:it["required"],minLength:Object(it["minLength"])(8),maxLength:Object(it["maxLength"])(16),alphaNum:it["alphaNum"]}},data:function(){return{username:"",password:"",loginErrorMessage:"",timeout:3e3,snackbar:!1}},methods:{handleLoginSubmit:function(){var t=this,e=this.username,a=this.password;this.$store.dispatch("login",{username:e,password:a}).then((function(){return t.$router.push("/")})).catch((function(e){"u"===e.response.data.field[0]?t.loginErrorMessage="Неверное имя пользователя!":"p"===e.response.data.field[0]&&(t.loginErrorMessage="Неверный пароль!"),t.snackbar=!0}))}},created:function(){""===this.$store.state.errorField&&(this.loginErrorMessage="")}},gt=ft,ht=(a("2d52"),Object(l["a"])(gt,pt,mt,!1,null,"5dea24bc",null)),xt=ht.exports;u()(ht,{VSnackbar:L["a"]});var bt=a("2f62"),vt=a("0e44");s["a"].use(bt["a"]);var wt=new bt["a"].Store({plugins:[Object(vt["a"])()],state:{status:"",token:"",user:{},place:{},errorField:""},mutations:{auth_request:function(t){t.status="loading"},auth_success:function(t,e){t.status="success",t.token=e,t.errorField=""},user_success:function(t,e){t.user=e},auth_error:function(t,e){t.status="error",t.errorField=e},logout:function(t){t.status="",t.token="",t.user=null},place_request:function(t){t.status="loading"},place_generate_success:function(t,e){t.status="success",t.place=e},place_generate_error:function(t){t.status="error"},sending_rate:function(t){t.status="loading"},update_user_places:function(t,e){t.status="success",t.user=e},rate_error:function(t){t.status="error"}},actions:{login:function(t,e){var a=t.commit;return new Promise((function(t,s){a("auth_request"),g()({url:"auth/login",data:e,method:"POST"}).then((function(e){var s=e.data.token,r=e.data.user;g.a.defaults.headers.common["x-access-token"]=s,a("auth_success",s),a("user_success",r),t(e)})).catch((function(t){var e=t.response.data.field;a("auth_error",e),s(t)}))}))},register:function(t,e){var a=t.commit;return new Promise((function(t,s){a("auth_request"),g()({url:"auth/register",data:e,method:"POST"}).then((function(e){var s=e.data.token,r=e.data.user;g.a.defaults.headers.common["x-access-token"]=s,a("auth_success",s),a("user_success",r),t(e)})).catch((function(t){a("auth_error"),s(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t,a){e("logout"),delete g.a.defaults.headers.common["x-access-token"],t()}))},getPlace:function(t,e){var a=t.commit;return new Promise((function(t,s){a("place_request"),g()("generator/place",{params:{category:e}}).then((function(e){var s=e.data;a("place_generate_success",s),t(e)})).catch((function(t){a("place_generate_error"),s(t)}))}))},sendRate:function(t,e){var a=t.commit;return new Promise((function(t,s){var r=e.userToken,n=e.placeId,o=e.rate;a("sending_rate"),g.a.defaults.headers.common["Authorization"]="Bearer "+r,g.a.post("generator/sendrate",{placeId:n,rate:o}).then((function(e){var s=e.data;a("update_user_places",s),t(e)})).catch((function(t){a("rate_error"),s(t)}))}))}},getters:{isAuth:function(t){return!!t.token},authStatus:function(t){return t.status},authedUser:function(t){return t.user},lastPlace:function(t){return t.place},getPlaceID:function(t){return t.place._id},getToken:function(t){return t.token}}}),_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-5/6 flex justify-center py-12 mb-12"},[a("AuthUserBoard",{attrs:{"first-name":t.siteUserData.firstname,"last-name":t.siteUserData.lastname,username:t.siteUserData.username,"user-places":t.siteUserData.places}})],1)},yt=[],kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container\n            flex flex-col text-center\n            bg-white shadow-md rounded-2xl\n            text-2xl md:text-3xl lg:text-3xl xl:text-3xl 2xl:text-4xl text-black\n            p-4\n            "},[a("h1",{staticClass:"text-gray-500 text-3xl lg:text-4xl 2xl:text-5xl  py-2 md:py-4 xl:py-6 break-words"},[t._v("@"+t._s(t.username))]),a("h1",{},[t._v(t._s(t.firstName)+" "+t._s(t.lastName))]),a("div",{staticClass:"container flex flex-col md:flex-row flex-wrap py-2"},t._l(t.userPlaces,(function(e){return a("div",{key:e._id,staticClass:"flex flex-col items-center justify-between\n             md:w-2/5 md:m-1/20 xl:w-3/12 xl:m-1/24 p-2 sm:p-4 my-2\n             shadow-lg rounded-md border"},[a("img",{staticClass:"object-cover rounded-md p-2",attrs:{src:e.photo,alt:""}}),a("h1",{staticClass:"p-2"},[t._v(t._s(e.title))]),a("h1",{staticClass:"p-2"},[t._v(" "+t._s(e.rating)+" "),a("v-icon",{attrs:{color:"#ffd061","background-color":"#ffdc8a",size:24}},[t._v(" mdi-star ")])],1)])})),0)])},Ct=[],$t={name:"AuthUserBoard",props:{firstName:{type:String,default:"A"},lastName:{type:String,default:"A"},username:{type:String,default:"AAAAAAAA"},userPlaces:{type:Array,default:null}}},jt=$t,At=Object(l["a"])(jt,kt,Ct,!1,null,"3567631a",null),Ot=At.exports;u()(At,{VIcon:d["a"]});var St={name:"AuthUserBoardView",components:{AuthUserBoard:Ot},data:function(){return{loading:"true",siteUserData:{firstname:"bar",lastname:"bar",username:"bar",places:[]}}},created:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$store.getters.authedUser;case 3:t.siteUserData=e.sent,t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()}},Pt=St,Nt=Object(l["a"])(Pt,_t,yt,!1,null,"587df3ce",null),Lt=Nt.exports;s["a"].use(h["a"]);var Rt=[{path:"/",name:"Home",component:T},{path:"/place",name:"Place",component:st},{path:"/signup",name:"SignUp",component:dt,meta:{guest:!0}},{path:"/userboard",name:"UserBoard",component:Lt,meta:{requiresAuth:!0}},{path:"/login",name:"LogIn",component:xt,meta:{guest:!0}}],qt=new h["a"]({mode:"history",base:"/",routes:Rt});qt.beforeEach((function(t,e,a){if(t.matched.some((function(t){return t.meta.requiresAuth}))){if(wt.getters.isAuth)return void a();a("/")}else a()}));var Ut=qt,Et=(a("9c9e"),a("f309"));a("15f5");s["a"].use(Et["a"]);var Dt=new Et["a"]({breakpoint:{thresholds:{sm:641,md:769,lg:1025,xl:1281,"2xl":1537}},icons:{iconfont:"fa"}});s["a"].prototype.$http=g.a;var Tt=localStorage.getItem("token");Tt&&(s["a"].prototype.$http.defaults.headers.common["x-access-token"]=Tt),s["a"].config.productionTip=!1,new s["a"]({router:Ut,vuetify:Dt,store:wt,render:function(t){return t(m)}}).$mount("#app")},"5d89":function(t,e,a){"use strict";a("d5e8")},"82db":function(t,e,a){},"9c9e":function(t,e,a){},b643:function(t,e,a){"use strict";a("f68d")},ba77:function(t,e,a){"use strict";a("82db")},d5e8:function(t,e,a){},f68d:function(t,e,a){}});
//# sourceMappingURL=app.c8f69cfc.js.map